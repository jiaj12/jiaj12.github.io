<!doctype html>
<html>
  <head>
    <!-- Required meta tags lang="en" -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Material Design for Bootstrap fonts and icons -->
    <link rel="stylesheet" href="css/gapi.css">

    <!-- Material Design for Bootstrap CSS integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous"-->
    <link rel="stylesheet" href="css/bootstrap-material-design.min.css" >

    <title>工程车数量计算</title>
  </head>
  <body>
  	<div class="progress" style="height: 20px;">
  <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
</div>
  	<div class="container-fluid">
  <!-- Content here -->
  <div  hidden="true">
  <h1>车辆计算器</h1>
    <a href="">挖掘机</a><input type="text" id="x" value="3500" name="挖掘机"><br/>
	<a href="">推土机</a><input type="text" id="xa" value="4300"><br/>
	<a href="">运输车</a><input type="text" id="xb" value="3200"><br/>
	<a href="">洒水车</a><input type="text" id="xc" value="1800"><br/>
	<a href="">液压锤</a><input type="text" id="xd" value="4800"><br/>
	<a href="">总预算</a><input type="text" id="f" value=""><br/>
	<button name="计算" id="submit" onclick="calc()" type="button" class="btn btn-outline-primary">开始计算</button>
		<div class="alert alert-success" role="alert" id="submitted" hidden="true">
	 		 This is a success alert—check it out!
		</div></div>
	<div class="container-fluid">
<div class="row"><br></div>
	  <div class="card" >
		  <!-- card  style="width: 60rem;"<img class="card-img-top" src="..." alt="Card image cap"> -->
		  <div class="card-body">
		    <h5 class="card-title">工程车数量计算</h5>
		    <p class="card-text">
		    	<form name="details">
		    	<div class="row">
		   <div class="col-sm">
	  <div class="form-group">
	    <label for="excavator">挖掘机</label>
	    <input type="text" class="form-control" id="excavator" aria-describedby="emailHelp" placeholder="" value="3500">
	     <small id="emailHelp" class="form-text text-muted">请输入整数，默认为3500</small> 
	  </div></div>
	   <div class="col-sm">
	  <div class="form-group">
	    <label for="bulldozer">推土机</label>
	    <input type="text" class="form-control" id="bulldozer" aria-describedby="emailHelp" placeholder="请输入整数，默认为4300" value="4300">
	    <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
	  </div> </div>
	  <div class="col-sm">
	  <div class="form-group">
	    <label for="truck">运输车</label>
	    <input type="text" class="form-control" id="truck" aria-describedby="emailHelp" placeholder="请输入整数，默认为3200" value="3200">
	    <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
	  </div> </div>
	  </div>
	  <div class="row">
	  <div class="col-sm">
	  <div class="form-group">
	    <label for="sprinkler">洒水车</label>
	    <input type="text" class="form-control" id="sprinkler" aria-describedby="emailHelp" placeholder="请输入整数，默认为1800" value="1800">
	    <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
	  </div></div>
	   <div class="col-sm">
	  <div class="form-group">
	    <label for="hydra-zhammer">液压锤</label>
	    <input type="text" class="form-control" id="hydra-zhammer" aria-describedby="emailHelp" placeholder="请输入整数，默认为4800" value="4800">
	    <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
	  </div></div>
	   <div class="col-sm">
	   	<div class="form-group">
	    <label for="total">总预算</label>
	    <input type="text" class="form-control" id="total" aria-describedby="emailHelp" placeholder="请输入整数，单位元" >
	    <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
	  </div></div>
	  </div>
	  </form>
	  		<!-- Button trigger modaldata-target="#exampleModalCenter" -->
			<button type="button" class="btn btn-primary large" data-toggle="modal"  id="calc">
			  开始计算
			</button>
			<!-- <button id="calc1">calc1</button> -->
			<!-- Modal -->
			<div class="modal fade bd-example-modal-lg" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" >
			  <div class="modal-dialog modal-dialog-centered " role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="exampleModalLongTitle">结果</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div class="modal-body" id="modalBody">
			      	<p id="excavatorRes"></p>
			      	<p id="bulldozerRes"></p>
			      	<p id="truckRes"></p>
			      	<p id="sprinklerRes"></p>
			      	<p id="hydra-zhammerRes"></p>
			      	<p id="totalRes"></p>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="closeModal">关闭</button>
			        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
			      </div>
			    </div>
			  </div>
			</div>
		   <!--  Some quick example text to build on the card title and make up the bulk of the card's content.</p> -->
		  </div>
		</div>

</div>
</div>
    <script src="js/jquery.min.js" ></script>
    <script src="js/popper.js" ></script>
    <script src="js/bootstrap-material-design.js" ></script>
    <script>$(document).ready(function() { $('body').bootstrapMaterialDesign(); });</script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script>
		$("#calc").click(function(){
    		if ($("#total").val()==""){
			    $("#total").select();
			    return ;
			};
			$('#exampleModalCenter').modal('show');
    		calc();
		});
		$("#closeModal").click(function(){
    		$("#modalBody").html();
  		});
			function calc(){
			var x = document.forms["details"]["excavator"].value;
			var xa = document.forms["details"]["bulldozer"].value;
			var xb = document.forms["details"]["truck"].value;
			var xc = document.forms["details"]["sprinkler"].value;
			var xd = document.forms["details"]["hydra-zhammer"].value;
			var f = document.getElementById("total").value;
			var now =10000;
			var best =[];
			var resultArray = [];

			for (var a=1;a<(Math.floor(f/Number(x)/3));a++){ 
			    for (var b=1;b<(Math.floor(f/Number(xa)/3));b++){
			    	for (var c=1;c<(Math.floor(f/Number(xb)/3));c++){
			    		for (var d=1;d<(Math.floor(f/Number(xc)/3));d++){
			    			for (var e=1;e<(Math.floor(f/Number(xd)/3));e++){
			    				if(a*x+b*xa+c*xb+d*xc+e*xd==f){
									var mycars =[];
									mycars[0]=a;
									mycars[1]=b;
									mycars[2]=c;
									mycars[3]=d;
									mycars[4]=e;
									var avga = (a+b+c+d+e)/5;
									var diffa = avga-a;
									var diffb = avga-b;
									var diffc = avga-c;
									var diffd = avga-d;
									var diffe = avga-e;
									var variace = diffa*diffa + diffb*diffb + diffc*diffc + diffd*diffd + diffe*diffe
									mycars[5]=variace;
				    				resultArray.push(mycars);
				    				if(variace <now){
				    					now= variace;
				    					best = mycars;
				    					//result.value=mycars;
				    					var suma = Number(best[0])*Number(x);
				    					var sumb = Number(best[1])*Number(xa);
				    					var sumc = Number(best[2])*Number(xb);
				    					var sumd = Number(best[3])*Number(xc);
				    					var sume = Number(best[4])*Number(xd);

				    					$("#excavatorRes").html("挖掘机："+best[0]+"个，单价："+x+"元，合计"+suma+"元；");
				    					$("#bulldozerRes").html("推土机："+best[1]+"个，单价："+xa+"元，合计"+sumb+"元；");
				    					$("#truckRes").html("运输车："+best[2]+"个，单价："+xb+"元，合计"+sumc+"元；");
				    					$("#sprinklerRes").html("洒水车："+best[3]+"个，单价："+xc+"元，合计"+sumd+"元；");
				    					$("#hydra-zhammerRes").html("液压锤："+best[4]+"个，单价："+xd+"元，合计"+sume+"元；");
				    					$("#totalRes").html("总计:"+f+"元");
				    				}
				    			}
			    			}
			    		}
			    	}
			    }
			}
			}

</script>
    
  </body>
</html>
